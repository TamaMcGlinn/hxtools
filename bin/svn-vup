#!/usr/bin/perl
#
#	svn-vup - update, show log and diffstat
#	by Jan Engelhardt <jengelh [at] gmx de>, 2007
#	http://jengelh.hopto.org/
#	released in the Public Domain
#
use Getopt::Long;
use strict;
&Getopt::Long::Configure(qw(bundling pass_through));

my $old = (`svnversion` =~ /^(\d+)/)[0];
my $new = "HEAD";
&GetOptions("r=s" => \$new);

#print "Executing svn up -r$new ", join(" ", @ARGV), "\n";
system "svn", "up", "-r$new", @ARGV;

if ($old < $new) {
	++$old;
	# print "Executing svn log -r$old:$new ", join(" ", @ARGV), "\n";
	system "svn", "log", "-r$old:$new", @ARGV;
	--$old;

	system "svn diff -r$old:$new | diffstat";
}
